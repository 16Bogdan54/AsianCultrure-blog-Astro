---
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogPost from "../components/blogpost/BlogPost.astro";
import TopPanel from "../components/topPanel/TopPanel";

import { getCollection } from "astro:content";
import { getUniqueTags } from "../helpers/helpers";

let blogPosts;

try {
  blogPosts = await getCollection("posts", (post) =>
    post.data.category?.match("languages")
  );
} catch (err) {
  console.error(err);
}
---

<BaseLayout title="Languages">
  <TopPanel title="Languages" tags={getUniqueTags(blogPosts)} />
  <ul
    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
  >
    {
      blogPosts?.map((post) => (
        <li>
          <BlogPost url={`/posts/${post.slug}`} postData={post.data} />
        </li>
      ))
    }
  </ul>
</BaseLayout>
